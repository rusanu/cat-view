<div class="photos-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading photos...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="alert alert-danger mx-3">
    <h5>Error Loading Photos</h5>
    <p>{{ error }}</p>
    <button class="btn btn-danger btn-sm" (click)="loadPhotos()">Retry</button>
  </div>

  <!-- No Photos Found -->
  <div *ngIf="!loading && !error && photos.length === 0" class="alert alert-info mx-3">
    <h5>No Photos Found</h5>
    <p>No photos found for the selected date range (last 24 hours by default).</p>
  </div>

  <!-- Split Panel Layout -->
  <div *ngIf="!loading && !error && photos.length > 0" class="split-panel">
    <!-- Left Panel: Photo List (Thumbnails) -->
    <div class="photo-list-panel" [style.width.px]="leftPanelWidth">
      <div class="panel-header">
        <div class="header-content">
          <h5>Photos ({{ photos.length }})</h5>
          <small class="text-muted">Last 24 hours</small>
        </div>
        <div class="header-actions">
          <button class="btn btn-sm btn-outline-secondary"
                  (click)="refreshPhotos()"
                  [disabled]="loading"
                  title="Refresh photos">
            <span *ngIf="!loading">üîÑ</span>
            <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
          </button>
          <button class="btn btn-sm"
                  [class.btn-success]="autoRefresh"
                  [class.btn-outline-secondary]="!autoRefresh"
                  (click)="toggleAutoRefresh()"
                  title="Toggle auto-refresh (every 1 minute)">
            <span *ngIf="!autoRefresh">‚è∏Ô∏è Auto</span>
            <span *ngIf="autoRefresh">‚ñ∂Ô∏è Auto</span>
          </button>
          <button class="btn btn-sm btn-outline-primary" (click)="toggleGraphs()">
            <span *ngIf="!showGraphs">üìä Show Graphs</span>
            <span *ngIf="showGraphs">üìä Hide Graphs</span>
          </button>
        </div>
      </div>
      <app-photo-list class="photo-list-container"
        [photos]="photos"
        [selectedPhoto]="selectedPhoto"
        (photoSelected)="onPhotoSelected($event)">
      </app-photo-list>
    </div>

    <!-- Draggable Divider -->
    <div class="panel-divider"
         (mousedown)="onDividerMouseDown($event)"
         title="Drag to resize">
      <div class="divider-handle"></div>
    </div>

    <!-- Right Panel: Photo Viewer + Graphs -->
    <div class="photo-viewer-panel">
      <div class="viewer-content" [class.with-graphs]="showGraphs">
        <div class="photo-section" [class.split]="showGraphs"
             [style.height.%]="showGraphs ? photoSectionHeight : 100">
          <app-photo-viewer
            [photo]="selectedPhoto">
          </app-photo-viewer>
        </div>

        <!-- Vertical Divider (only when graphs shown) -->
        <div *ngIf="showGraphs" class="vertical-divider"
             (mousedown)="onVerticalDividerMouseDown($event)"
             title="Drag to resize">
          <div class="vertical-divider-handle"></div>
        </div>

        <div *ngIf="showGraphs" class="graphs-section"
             [style.height.%]="100 - photoSectionHeight">
          <app-photo-graphs
            [photos]="photos">
          </app-photo-graphs>
        </div>
      </div>
    </div>
  </div>
</div>
