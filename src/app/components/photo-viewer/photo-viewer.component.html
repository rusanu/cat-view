<div class="photo-viewer-container">
  <!-- No Photo Selected -->
  <div *ngIf="!photo" class="no-photo">
    <p class="text-muted">Selectează o poză pentru vizualizare</p>
  </div>

  <!-- Photo Display -->
  <div *ngIf="photo" class="photo-display">

    <!-- Image -->
    <div class="image-container">
      <button class="photo-nav left" (click)="emitPrevPhoto()"><</button>
      <button class="photo-nav right" (click)="emitNextPhoto()">></button>
      <img [src]="photo.url"
           class="full-image"
           [alt]="photo.fileName"
           class="main-photo"
           [style.transform]="getRotationStyle()"
           [style.filter]="getBrightnessFilter(config.brightnessLevel$ | async)">
    </div>

    <div *ngIf="(config.showMetdata$ | async)" class="viewer-toolbar">
      <div class="toolbar-info">
        <strong>{{ photo.fileName }}</strong>
        <span class="text-muted ms-3">{{ formatDateTime(photo.timestamp) }}</span>
      </div>
    </div>

    <!-- Metadata - Always render to prevent layout shift -->
    <div *ngIf="(config.showMetdata$ | async)" class="metadata-bar">
      <div *ngIf="metadata" class="metadata-grid">
        <div class="metadata-item">
          <span class="metadata-label">Temperatură:</span>
          <span class="metadata-value">{{ metadata.temperature_celsius }}°C</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">Umiditate:</span>
          <span class="metadata-value">{{ metadata.humidity_percent }}%</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">Pătură:</span>
          <span class="metadata-value" [class.status-on]="metadata.blanket_on">
            {{ metadata.blanket_on ? 'PORNITĂ' : 'OPRITĂ' }}
          </span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">Pisică:</span>
          <span class="metadata-value" [class.status-on]="metadata.cat_present">
            {{ metadata.cat_present ? 'Prezentă' : 'Plecat' }}
          </span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">Mișcare:</span>
          <span class="metadata-value">acum {{ metadata.seconds_since_last_motion }}s</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">Timp funcționare:</span>
          <span class="metadata-value">{{ formatUptime(metadata.uptime_seconds) }}</span>
        </div>
      </div>
      <span *ngIf="metadataLoading" class="text-muted">Se încarcă metadatele...</span>
      <span *ngIf="!metadata && !metadataLoading && photo" class="text-muted">Nu există metadate disponibile</span>
    </div>
  </div>
</div>
